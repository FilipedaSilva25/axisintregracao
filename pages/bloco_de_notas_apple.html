<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bloco de Notas Apple | AXIS Intelligence</title>
    <link rel="stylesheet" href="../css/bloco_de_notas_apple.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Bibliotecas Externas -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@latest/dist/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lz-string@1.4.4/libs/lz-string.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@latest/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Barra Superior - Menu, T√≠tulo e Nova Nota -->
    <div class="top-header-bar">
        <div class="header-left">
            <button class="hamburger-btn" id="hamburger-btn" onclick="toggleHamburgerMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1 class="page-title">AXIS NOTAS</h1>
        </div>
        <div class="header-right">
            <button class="btn-theme-header" id="btn-theme-toggle-header" title="Alternar tema (claro/escuro)" type="button" aria-label="Alternar tema">
                <i class="fas fa-moon"></i>
            </button>
            <button class="btn-new-note-header" id="btn-new-note-header" title="Nova Nota (Ctrl+N)" onclick="typeof createNewNote==='function'&&createNewNote(); return false;">
                <span>NOVA NOTA</span>
            </button>
        </div>
        <div class="hamburger-menu" id="hamburger-menu">
            <a href="../index.html#page-home" class="menu-item">
                <i class="fas fa-arrow-left"></i>
                <span>Voltar para Dashboard</span>
            </a>
        </div>
    </div>

    <!-- Toolbar Estilo Google Docs (centralizada, s√≥ aparece com nota aberta) -->
    <div class="google-docs-toolbar" id="google-docs-toolbar">
        <div class="toolbar-left-section">
            <!-- Menus -->
            <button class="toolbar-btn-menus" id="toolbar-menus" title="Menus">
                <i class="fas fa-bars"></i>
            </button>
            
            <!-- Undo/Redo -->
            <button class="toolbar-btn" id="toolbar-undo" title="Desfazer (Ctrl+Z)">
                <i class="fas fa-undo"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-redo" title="Refazer (Ctrl+Y)">
                <i class="fas fa-redo"></i>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Print, Spell Check, Paint Format -->
            <button class="toolbar-btn" id="toolbar-print" title="Imprimir">
                <i class="fas fa-print"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-spellcheck" title="Verificar ortografia">
                <i class="fas fa-spell-check"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-paint-format" title="Formato de pintura">
                <i class="fas fa-format-paint"></i>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Zoom -->
            <div class="toolbar-dropdown">
                <button class="toolbar-dropdown-btn" id="toolbar-zoom" title="Zoom">
                    <span>100%</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="toolbar-dropdown-menu" id="zoom-menu">
                    <div class="dropdown-item" data-value="50">50%</div>
                    <div class="dropdown-item" data-value="75">75%</div>
                    <div class="dropdown-item" data-value="90">90%</div>
                    <div class="dropdown-item" data-value="100">100%</div>
                    <div class="dropdown-item" data-value="125">125%</div>
                    <div class="dropdown-item" data-value="150">150%</div>
                    <div class="dropdown-item" data-value="200">200%</div>
                </div>
            </div>
            
            <div class="toolbar-divider"></div>
            
            <!-- Text Style -->
            <div class="toolbar-dropdown">
                <button class="toolbar-dropdown-btn" id="toolbar-text-style" title="Estilo de texto">
                    <span>Texto normal</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="toolbar-dropdown-menu" id="text-style-menu">
                    <div class="dropdown-item" data-value="normal">Texto normal</div>
                    <div class="dropdown-item" data-value="title">T√≠tulo</div>
                    <div class="dropdown-item" data-value="subtitle">Subt√≠tulo</div>
                    <div class="dropdown-item" data-value="heading1">T√≠tulo 1</div>
                    <div class="dropdown-item" data-value="heading2">T√≠tulo 2</div>
                    <div class="dropdown-item" data-value="heading3">T√≠tulo 3</div>
                </div>
            </div>
            
            <!-- Font -->
            <div class="toolbar-dropdown">
                <button class="toolbar-dropdown-btn" id="toolbar-font" title="Fonte">
                    <span>Arial</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="toolbar-dropdown-menu" id="font-menu">
                    <div class="dropdown-item" data-value="Arial">Arial</div>
                    <div class="dropdown-item" data-value="Helvetica">Helvetica</div>
                    <div class="dropdown-item" data-value="Times New Roman">Times New Roman</div>
                    <div class="dropdown-item" data-value="Courier New">Courier New</div>
                    <div class="dropdown-item" data-value="Georgia">Georgia</div>
                    <div class="dropdown-item" data-value="Verdana">Verdana</div>
                    <div class="dropdown-item" data-value="Inter">Inter</div>
                </div>
            </div>
            
            <!-- Font Size -->
            <div class="toolbar-dropdown">
                <button class="toolbar-dropdown-btn" id="toolbar-font-size" title="Tamanho da fonte">
                    <span>11</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="toolbar-dropdown-menu" id="font-size-menu">
                    <div class="dropdown-item" data-value="8">8</div>
                    <div class="dropdown-item" data-value="9">9</div>
                    <div class="dropdown-item" data-value="10">10</div>
                    <div class="dropdown-item" data-value="11">11</div>
                    <div class="dropdown-item" data-value="12">12</div>
                    <div class="dropdown-item" data-value="14">14</div>
                    <div class="dropdown-item" data-value="16">16</div>
                    <div class="dropdown-item" data-value="18">18</div>
                    <div class="dropdown-item" data-value="20">20</div>
                    <div class="dropdown-item" data-value="24">24</div>
                    <div class="dropdown-item" data-value="28">28</div>
                    <div class="dropdown-item" data-value="32">32</div>
                    <div class="dropdown-item" data-value="36">36</div>
                    <div class="dropdown-item" data-value="48">48</div>
                    <div class="dropdown-item" data-value="72">72</div>
                </div>
            </div>
            
            <div class="toolbar-divider"></div>
            
            <!-- Bold, Italic, Underline -->
            <button class="toolbar-btn" id="toolbar-bold" title="Negrito (Ctrl+B)">
                <strong>B</strong>
            </button>
            <button class="toolbar-btn" id="toolbar-italic" title="It√°lico (Ctrl+I)">
                <em>I</em>
            </button>
            <button class="toolbar-btn" id="toolbar-underline" title="Sublinhado (Ctrl+U)">
                <u>U</u>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Text Color & Highlight -->
            <div class="color-picker-container">
                <button class="toolbar-btn" id="btn-text-color" title="Cor do texto">
                    <span style="font-weight: bold;">A</span>
                    <span class="color-indicator" id="text-color-indicator" style="background: #000000;"></span>
                </button>
                <div class="color-picker" id="text-color-picker">
                    <!-- Cores Principais -->
                    <div class="color-section">
                        <div class="color-option" data-color="#000000" style="background: #000000;" title="Preto"></div>
                        <div class="color-option" data-color="#434343" style="background: #434343;" title="Cinza Escuro 1"></div>
                        <div class="color-option" data-color="#666666" style="background: #666666;" title="Cinza Escuro 2"></div>
                        <div class="color-option" data-color="#999999" style="background: #999999;" title="Cinza M√©dio"></div>
                        <div class="color-option" data-color="#B7B7B7" style="background: #B7B7B7;" title="Cinza Claro 1"></div>
                        <div class="color-option" data-color="#CCCCCC" style="background: #CCCCCC;" title="Cinza Claro 2"></div>
                        <div class="color-option" data-color="#D9D9D9" style="background: #D9D9D9;" title="Cinza Muito Claro"></div>
                        <div class="color-option" data-color="#EFEFEF" style="background: #EFEFEF;" title="Cinza Quase Branco"></div>
                        <div class="color-option" data-color="#F3F3F3" style="background: #F3F3F3; border: 1px solid #ddd;" title="Branco Sujo"></div>
                        <div class="color-option" data-color="#FFFFFF" style="background: #FFFFFF; border: 1px solid #ccc;" title="Branco"></div>
                    </div>
                    <!-- Vermelhos e Cores Prim√°rias -->
                    <div class="color-section">
                        <div class="color-option" data-color="#980000" style="background: #980000;" title="Vermelho Escuro"></div>
                        <div class="color-option" data-color="#FF0000" style="background: #FF0000;" title="Vermelho"></div>
                        <div class="color-option" data-color="#FF9900" style="background: #FF9900;" title="Laranja"></div>
                        <div class="color-option" data-color="#FFFF00" style="background: #FFFF00;" title="Amarelo"></div>
                        <div class="color-option" data-color="#00FF00" style="background: #00FF00;" title="Verde Lim√£o"></div>
                        <div class="color-option" data-color="#00FFFF" style="background: #00FFFF;" title="Ciano"></div>
                        <div class="color-option" data-color="#4A86E8" style="background: #4A86E8;" title="Azul"></div>
                        <div class="color-option" data-color="#0000FF" style="background: #0000FF;" title="Azul Escuro"></div>
                        <div class="color-option" data-color="#9900FF" style="background: #9900FF;" title="Roxo"></div>
                        <div class="color-option" data-color="#FF00FF" style="background: #FF00FF;" title="Magenta"></div>
                    </div>
                    <!-- Tons de Vermelho/Rosa -->
                    <div class="color-section">
                        <div class="color-option" data-color="#E06666" style="background: #E06666;" title="Vermelho Claro"></div>
                        <div class="color-option" data-color="#F6B26B" style="background: #F6B26B;" title="Laranja Claro"></div>
                        <div class="color-option" data-color="#FFD966" style="background: #FFD966;" title="Amarelo Claro"></div>
                        <div class="color-option" data-color="#93C47D" style="background: #93C47D;" title="Verde Claro"></div>
                        <div class="color-option" data-color="#76A5AF" style="background: #76A5AF;" title="Azul Acinzentado"></div>
                        <div class="color-option" data-color="#6D9EEB" style="background: #6D9EEB;" title="Azul Claro"></div>
                        <div class="color-option" data-color="#8E7CC3" style="background: #8E7CC3;" title="Roxo Claro"></div>
                        <div class="color-option" data-color="#C27BA0" style="background: #C27BA0;" title="Rosa Escuro"></div>
                        <div class="color-option" data-color="#EA9999" style="background: #EA9999;" title="Rosa Claro"></div>
                        <div class="color-option" data-color="#F9CB9C" style="background: #F9CB9C;" title="P√™ssego"></div>
                    </div>
                    <!-- Tons Past√©is -->
                    <div class="color-section">
                        <div class="color-option" data-color="#FFE599" style="background: #FFE599;" title="Amarelo Pastel"></div>
                        <div class="color-option" data-color="#B6D7A8" style="background: #B6D7A8;" title="Verde Pastel"></div>
                        <div class="color-option" data-color="#A2C4C9" style="background: #A2C4C9;" title="Azul Pastel"></div>
                        <div class="color-option" data-color="#A4C2F4" style="background: #A4C2F4;" title="Azul C√©u"></div>
                        <div class="color-option" data-color="#B4A7D6" style="background: #B4A7D6;" title="Lavanda"></div>
                        <div class="color-option" data-color="#D5A6BD" style="background: #D5A6BD;" title="Rosa Pastel"></div>
                        <div class="color-option" data-color="#F4CCCC" style="background: #F4CCCC;" title="Rosa Muito Claro"></div>
                        <div class="color-option" data-color="#FCE5CD" style="background: #FCE5CD;" title="Bege"></div>
                        <div class="color-option" data-color="#FFF2CC" style="background: #FFF2CC;" title="Creme"></div>
                        <div class="color-option" data-color="#D9EAD3" style="background: #D9EAD3;" title="Verde Menta"></div>
                    </div>
                    <!-- Cores Adicionais -->
                    <div class="color-section">
                        <div class="color-option" data-color="#D0E0E3" style="background: #D0E0E3;" title="Azul Gelo"></div>
                        <div class="color-option" data-color="#C9DAF8" style="background: #C9DAF8;" title="Azul Beb√™"></div>
                        <div class="color-option" data-color="#CFE2F3" style="background: #CFE2F3;" title="Azul Claro"></div>
                        <div class="color-option" data-color="#D9D2E9" style="background: #D9D2E9;" title="Lavanda Claro"></div>
                        <div class="color-option" data-color="#EAD1DC" style="background: #EAD1DC;" title="Rosa P√°lido"></div>
                        <div class="color-option" data-color="#F3CFD2" style="background: #F3CFD2;" title="Rosa Suave"></div>
                        <div class="color-option" data-color="#FADBD8" style="background: #FADBD8;" title="P√™ssego Claro"></div>
                        <div class="color-option" data-color="#FDEBD0" style="background: #FDEBD0;" title="Bege Claro"></div>
                        <div class="color-option" data-color="#FCF3CF" style="background: #FCF3CF;" title="Amarelo P√°lido"></div>
                        <div class="color-option" data-color="#D5DBDB" style="background: #D5DBDB;" title="Cinza Azulado"></div>
                    </div>
                </div>
            </div>
            
            <div class="color-picker-container">
                <button class="toolbar-btn" id="btn-highlight" title="Cor de destaque">
                    <i class="fas fa-highlighter"></i>
                </button>
                <div class="color-picker" id="highlight-color-picker">
                    <!-- Cores Principais de Marca-Texto -->
                    <div class="color-section">
                        <div class="color-option" data-color="#FFFF00" style="background: #FFFF00;" title="Amarelo"></div>
                        <div class="color-option" data-color="#FFD966" style="background: #FFD966;" title="Amarelo Claro"></div>
                        <div class="color-option" data-color="#FFF2CC" style="background: #FFF2CC;" title="Amarelo P√°lido"></div>
                        <div class="color-option" data-color="#FCF3CF" style="background: #FCF3CF;" title="Amarelo Muito Claro"></div>
                        <div class="color-option" data-color="#F9CB9C" style="background: #F9CB9C;" title="P√™ssego"></div>
                        <div class="color-option" data-color="#F6B26B" style="background: #F6B26B;" title="Laranja Claro"></div>
                        <div class="color-option" data-color="#FF9900" style="background: #FF9900;" title="Laranja"></div>
                        <div class="color-option" data-color="#E06666" style="background: #E06666;" title="Vermelho Claro"></div>
                        <div class="color-option" data-color="#CC0000" style="background: #CC0000;" title="Vermelho Escuro"></div>
                        <div class="color-option" data-color="#980000" style="background: #980000;" title="Vermelho Muito Escuro"></div>
                    </div>
                    <!-- Verdes -->
                    <div class="color-section">
                        <div class="color-option" data-color="#00FF00" style="background: #00FF00;" title="Verde Lim√£o"></div>
                        <div class="color-option" data-color="#93C47D" style="background: #93C47D;" title="Verde Claro"></div>
                        <div class="color-option" data-color="#B6D7A8" style="background: #B6D7A8;" title="Verde Pastel"></div>
                        <div class="color-option" data-color="#D9EAD3" style="background: #D9EAD3;" title="Verde Menta"></div>
                        <div class="color-option" data-color="#6AA84F" style="background: #6AA84F;" title="Verde M√©dio"></div>
                        <div class="color-option" data-color="#38761D" style="background: #38761D;" title="Verde Escuro"></div>
                        <div class="color-option" data-color="#6D9EEB" style="background: #6D9EEB;" title="Azul Claro"></div>
                        <div class="color-option" data-color="#4A86E8" style="background: #4A86E8;" title="Azul"></div>
                        <div class="color-option" data-color="#3C78D8" style="background: #3C78D8;" title="Azul M√©dio"></div>
                        <div class="color-option" data-color="#1C4587" style="background: #1C4587;" title="Azul Escuro"></div>
                    </div>
                    <!-- Azuis -->
                    <div class="color-section">
                        <div class="color-option" data-color="#00FFFF" style="background: #00FFFF;" title="Ciano"></div>
                        <div class="color-option" data-color="#A2C4C9" style="background: #A2C4C9;" title="Azul Pastel"></div>
                        <div class="color-option" data-color="#A4C2F4" style="background: #A4C2F4;" title="Azul C√©u"></div>
                        <div class="color-option" data-color="#CFE2F3" style="background: #CFE2F3;" title="Azul Claro"></div>
                        <div class="color-option" data-color="#C9DAF8" style="background: #C9DAF8;" title="Azul Beb√™"></div>
                        <div class="color-option" data-color="#D0E0E3" style="background: #D0E0E3;" title="Azul Gelo"></div>
                        <div class="color-option" data-color="#76A5AF" style="background: #76A5AF;" title="Azul Acinzentado"></div>
                        <div class="color-option" data-color="#6FA8DC" style="background: #6FA8DC;" title="Azul Oceano"></div>
                        <div class="color-option" data-color="#45818E" style="background: #45818E;" title="Azul Petr√≥leo"></div>
                        <div class="color-option" data-color="#202020" style="background: #202020;" title="Preto Quase Azul"></div>
                    </div>
                    <!-- Roxos e Rosas -->
                    <div class="color-section">
                        <div class="color-option" data-color="#FF00FF" style="background: #FF00FF;" title="Magenta"></div>
                        <div class="color-option" data-color="#9900FF" style="background: #9900FF;" title="Roxo"></div>
                        <div class="color-option" data-color="#8E7CC3" style="background: #8E7CC3;" title="Roxo Claro"></div>
                        <div class="color-option" data-color="#B4A7D6" style="background: #B4A7D6;" title="Lavanda"></div>
                        <div class="color-option" data-color="#D5A6BD" style="background: #D5A6BD;" title="Rosa Pastel"></div>
                        <div class="color-option" data-color="#C27BA0" style="background: #C27BA0;" title="Rosa Escuro"></div>
                        <div class="color-option" data-color="#EA9999" style="background: #EA9999;" title="Rosa Claro"></div>
                        <div class="color-option" data-color="#F4CCCC" style="background: #F4CCCC;" title="Rosa Muito Claro"></div>
                        <div class="color-option" data-color="#EAD1DC" style="background: #EAD1DC;" title="Rosa P√°lido"></div>
                        <div class="color-option" data-color="#F3CFD2" style="background: #F3CFD2;" title="Rosa Suave"></div>
                    </div>
                    <!-- Cores Suaves Adicionais -->
                    <div class="color-section">
                        <div class="color-option" data-color="#D5DBDB" style="background: #D5DBDB;" title="Cinza Azulado"></div>
                        <div class="color-option" data-color="#FDEBD0" style="background: #FDEBD0;" title="Bege Claro"></div>
                        <div class="color-option" data-color="#FCE5CD" style="background: #FCE5CD;" title="Bege"></div>
                        <div class="color-option" data-color="#FFF2CC" style="background: #FFF2CC;" title="Creme"></div>
                        <div class="color-option" data-color="#D9EAD3" style="background: #D9EAD3;" title="Verde Menta"></div>
                        <div class="color-option" data-color="#C9DAF8" style="background: #C9DAF8;" title="Azul Beb√™"></div>
                        <div class="color-option" data-color="#CFE2F3" style="background: #CFE2F3;" title="Azul Claro"></div>
                        <div class="color-option" data-color="#D9D2E9" style="background: #D9D2E9;" title="Lavanda Claro"></div>
                        <div class="color-option" data-color="#EAD1DC" style="background: #EAD1DC;" title="Rosa P√°lido"></div>
                        <div class="color-option" data-color="#F3CFD2" style="background: #F3CFD2;" title="Rosa Suave"></div>
                    </div>
                </div>
            </div>
            
            <div class="toolbar-divider"></div>
            
            <!-- Link, Image, Comment -->
            <button class="toolbar-btn" id="toolbar-link" title="Inserir link">
                <i class="fas fa-link"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-image" title="Inserir imagem">
                <i class="fas fa-image"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-comment" title="Adicionar coment√°rio">
                <i class="fas fa-comment"></i>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Alignment -->
            <button class="toolbar-btn" id="toolbar-align-left" title="Alinhar √† esquerda">
                <i class="fas fa-align-left"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-align-center" title="Centralizar">
                <i class="fas fa-align-center"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-align-right" title="Alinhar √† direita">
                <i class="fas fa-align-right"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-align-justify" title="Justificar">
                <i class="fas fa-align-justify"></i>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Line Spacing -->
            <div class="toolbar-dropdown">
                <button class="toolbar-dropdown-btn" id="toolbar-line-spacing" title="Espa√ßamento entre linhas">
                    <i class="fas fa-arrows-alt-v"></i>
                </button>
                <div class="toolbar-dropdown-menu" id="line-spacing-menu">
                    <div class="dropdown-item" data-value="1">1.0</div>
                    <div class="dropdown-item" data-value="1.15">1.15</div>
                    <div class="dropdown-item" data-value="1.5">1.5</div>
                    <div class="dropdown-item" data-value="2">2.0</div>
                    <div class="dropdown-item" data-value="2.5">2.5</div>
                    <div class="dropdown-item" data-value="3">3.0</div>
                </div>
            </div>
            
            <!-- Lists -->
            <button class="toolbar-btn" id="toolbar-list-bullet" title="Lista com marcadores">
                <i class="fas fa-list-ul"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-list-number" title="Lista numerada">
                <i class="fas fa-list-ol"></i>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Indent -->
            <button class="toolbar-btn" id="toolbar-indent-decrease" title="Diminuir recuo">
                <i class="fas fa-outdent"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-indent-increase" title="Aumentar recuo">
                <i class="fas fa-indent"></i>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Clear Formatting -->
            <button class="toolbar-btn" id="toolbar-clear-format" title="Limpar formata√ß√£o">
                <i class="fas fa-remove-format"></i>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Op√ß√µes do antigo menu pequeno: Tag, Preview, Vincular Notas, Vers√µes, Coment√°rios -->
            <button class="toolbar-btn" id="toolbar-add-tag" title="Adicionar Tag">
                <i class="fas fa-tag"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-markdown-preview" title="Preview Markdown">
                <i class="fas fa-eye"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-link-notes" title="Vincular Notas">
                <i class="fas fa-link"></i>
            </button>
            <button class="toolbar-btn" id="toolbar-versions" title="Vers√µes">
                <i class="fas fa-history"></i>
            </button>
        </div>
    </div>

    <div class="notebook-container">
        <!-- Sidebar de Pastas -->
        <aside class="notebook-sidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-title">
                    <i class="fas fa-folder"></i>
                    Pastas
                </h2>
                <div class="sidebar-header-actions-row">
                    <button class="btn-search-icon" id="btn-search-notes" title="Buscar notas" onclick="typeof toggleSearch==='function'&&toggleSearch(); return false;">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="btn-new-folder" id="btn-new-folder" title="Nova Pasta" onclick="typeof showModal==='function'&&showModal('modal-new-folder'); return false;">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>
            
            <!-- Campo de busca oculto por padr√£o -->
            <div class="sidebar-search-container" id="sidebar-search-container" style="display: none;">
                <div class="sidebar-search">
                    <input type="text" id="search-notes" placeholder="Buscar notas..." class="search-input">
                    <i class="fas fa-search search-icon"></i>
                </div>
            </div>

            <nav class="folder-tree" id="folder-tree">
                <div class="folder-item root-folder" data-folder-id="root">
                    <div class="folder-content" onclick="typeof selectFolder==='function'&&selectFolder('root', this); return false;">
                        <i class="fas fa-folder-open folder-icon"></i>
                        <span class="folder-name">Todas as Notas</span>
                    </div>
                    <!-- Root n√£o tem menu de op√ß√µes -->
                </div>
                <!-- Pastas ser√£o carregadas dinamicamente -->
            </nav>

            <div class="sidebar-footer">
                <button class="btn-favorites-icon" onclick="typeof showFavorites==='function'&&showFavorites(); return false;" title="Favoritos">
                    <i class="fas fa-star"></i>
                </button>
                <button class="btn-pinned" onclick="typeof showPinned==='function'&&showPinned(); return false;" title="Fixadas">
                    <i class="fas fa-thumbtack"></i>
                </button>
                <button class="btn-trash" onclick="typeof showTrash==='function'&&showTrash(); return false;" title="Lixeira">
                    <i class="fas fa-trash-alt"></i>
                </button>
            </div>
        </aside>

        <!-- Resizer: arrastar para estender/retrair a sidebar -->
        <div class="sidebar-resizer" id="sidebar-resizer" title="Arrastar para ajustar a largura"></div>

        <!-- √Årea Principal -->
        <main class="notebook-main">
            <!-- Toolbar Principal (apenas a√ß√µes gerais) -->
            <div class="notebook-toolbar">
                <div class="toolbar-left">
                    <!-- Bot√£o Nova Nota removido daqui, agora est√° na sidebar -->
                </div>

                <div class="toolbar-right">
                    <button class="toolbar-btn enhanced-icon" id="btn-focus-mode" title="Modo Foco (F11)">
                        <i class="fas fa-expand-arrows-alt"></i>
                    </button>
                    <button class="toolbar-btn enhanced-icon" id="btn-templates" title="Templates">
                        <i class="fas fa-file-invoice"></i>
                    </button>
                    <button class="toolbar-btn enhanced-icon" id="btn-statistics" title="Estat√≠sticas">
                        <i class="fas fa-chart-line"></i>
                    </button>
                    <button class="toolbar-btn enhanced-icon" id="btn-shortcuts" title="Atalhos">
                        <i class="fas fa-keyboard"></i>
                    </button>
                    <button class="toolbar-btn enhanced-icon" id="btn-theme-toggle" title="Alternar Tema">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>

            <!-- Lista de Notas -->
            <div class="notes-list-container" id="notes-list-container">
                <div class="notes-list-header">
                    <h3 id="current-folder-name">Todas as Notas</h3>
                    <div class="header-actions">
                        <button class="toolbar-btn" id="btn-advanced-search" title="Busca Avan√ßada" onclick="typeof showModal==='function'&&showModal('modal-advanced-search'); return false;">
                            <i class="fas fa-filter"></i>
                        </button>
                        <button class="toolbar-btn" id="btn-voice-search" title="Busca por Voz" onclick="typeof startVoiceSearch==='function'&&startVoiceSearch(); return false;">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="grid" title="Visualiza√ß√£o em Grade" onclick="typeof setViewMode==='function'&&setViewMode('grid'); return false;">
                                <i class="fas fa-th"></i>
                            </button>
                            <button class="view-btn" data-view="list" title="Visualiza√ß√£o em Lista" onclick="typeof setViewMode==='function'&&setViewMode('list'); return false;">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="notes-grid" id="notes-grid">
                    <div class="empty-state" id="empty-state">
                        <div class="empty-icon">üìù</div>
                        <h3>Nenhuma nota ainda</h3>
                        <p>Crie sua primeira nota usando o bot√£o <strong>Nova Nota</strong> no topo.</p>
                    </div>
                </div>
            </div>
            
            <!-- Espa√ßo em Branco quando n√£o h√° nota aberta / pasta vazia -->
            <div class="empty-editor-state" id="empty-editor-state">
                <div class="empty-editor-content">
                    <div class="empty-editor-icon" id="empty-editor-icon">‚úçÔ∏è</div>
                    <h2 id="empty-editor-title">Selecione uma nota para come√ßar</h2>
                    <p id="empty-editor-subtitle">Ou crie uma nova nota quando quiser</p>
                    <button type="button" class="btn-apple-primary empty-editor-create-btn" id="empty-editor-create-btn" onclick="typeof createNewNote==='function'&&createNewNote();">
                        <i class="fas fa-plus"></i>
                        <span>Criar nota</span>
                    </button>
                </div>
            </div>

            <!-- Editor de Nota -->
            <div class="note-editor-container" id="note-editor-container" style="display: none;">
                <div class="editor-header">
                    <input type="text" id="note-title" class="note-title-input" placeholder="T√≠tulo da Nota">
                    <div class="editor-tags" id="editor-tags"></div>
                    <!-- Espa√ßo cinza: menu hamb√∫rguer (abre/fecha todas as op√ß√µes) + Fechar -->
                    <div class="editor-header-actions">
                        <button type="button" class="editor-hamburger-btn" id="editor-toolbar-hamburger" title="Op√ß√µes de formata√ß√£o" aria-label="Abrir menu de op√ß√µes">
                            <span></span>
                            <span></span>
                            <span></span>
                        </button>
                        <button class="editor-btn" id="btn-close-editor" title="Fechar (Esc)">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <div class="editor-content" id="editor-content-wrapper">
                    <div class="reading-progress" id="reading-progress"></div>
                    <div class="image-layout-toolbar" id="image-layout-toolbar" aria-hidden="true">
                        <button type="button" class="img-layout-btn" data-layout="block" title="Bloco (centralizado)"><i class="fas fa-align-center"></i> Bloco</button>
                        <button type="button" class="img-layout-btn" data-layout="right" title="Texto √† direita (imagem √† esquerda)"><i class="fas fa-align-left"></i> Esquerda</button>
                        <button type="button" class="img-layout-btn" data-layout="left" title="Texto √† esquerda (imagem √† direita)"><i class="fas fa-align-right"></i> Direita</button>
                        <button type="button" class="img-layout-btn" data-layout="caption" title="Legenda abaixo"><i class="fas fa-caption"></i> Legenda</button>
                    </div>
                    <div class="editor-writing-area">
                        <div class="rich-editor-placeholder" id="rich-editor-placeholder" aria-hidden="true">Comece a escrever...</div>
                        <div class="rich-editor" id="rich-editor" contenteditable="true" spellcheck="true" data-placeholder="Comece a escrever..."><p><br></p></div>
                    </div>
                    <div class="markdown-preview" id="markdown-preview" style="display: none;"></div>
                </div>

                <div class="editor-footer">
                    <div class="editor-status">
                        <span id="save-status">Salvo</span>
                        <span id="autosave-indicator" class="autosave-indicator"></span>
                    </div>
                    <div class="editor-info">
                        <span id="word-count">0 PALAVRAS</span>
                        <span class="footer-sep">|</span>
                        <span id="char-count">0 CARACTERES</span>
                        <span class="footer-sep">|</span>
                        <span id="image-count">0 IMAGENS</span>
                        <span class="footer-sep">|</span>
                        <span id="reading-time" class="footer-reading-time">0 MIN DE LEITURA</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Painel de op√ß√µes: sai do menu hamb√∫rguer (como uma conversa), fica fixo at√© clicar no hamb√∫rguer de novo -->
    <aside class="editor-options-panel" id="editor-options-panel" aria-hidden="true">
        <div class="editor-options-header">
            <span class="editor-options-title">Op√ß√µes</span>
            <button type="button" class="editor-options-close" id="editor-options-close" title="Fechar">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <nav class="editor-options-list" id="editor-options-list">
            <button type="button" class="editor-option-item" data-action="undo" title="Desfazer"><i class="fas fa-undo"></i><span>Desfazer</span></button>
            <button type="button" class="editor-option-item" data-action="redo" title="Refazer"><i class="fas fa-redo"></i><span>Refazer</span></button>
            <button type="button" class="editor-option-item" data-action="print" title="Imprimir"><i class="fas fa-print"></i><span>Imprimir</span></button>
            <button type="button" class="editor-option-item" data-action="bold" title="Negrito"><i class="fas fa-bold"></i><span>Negrito</span></button>
            <button type="button" class="editor-option-item" data-action="italic" title="It√°lico"><i class="fas fa-italic"></i><span>It√°lico</span></button>
            <button type="button" class="editor-option-item" data-action="underline" title="Sublinhado"><i class="fas fa-underline"></i><span>Sublinhado</span></button>
            <button type="button" class="editor-option-item" data-action="text-color" title="Cor do texto"><i class="fas fa-palette"></i><span>Cor do texto</span></button>
            <button type="button" class="editor-option-item" data-action="highlight" title="Marca-texto"><i class="fas fa-highlighter"></i><span>Marca-texto</span></button>
            <button type="button" class="editor-option-item" data-action="link" title="Inserir link"><i class="fas fa-link"></i><span>Inserir link</span></button>
            <button type="button" class="editor-option-item" data-action="image" title="Inserir imagem"><i class="fas fa-image"></i><span>Inserir imagem</span></button>
            <button type="button" class="editor-option-item" data-action="tag" title="Adicionar Tag"><i class="fas fa-tag"></i><span>Tag</span></button>
            <button type="button" class="editor-option-item" data-action="markdown" title="Preview Markdown"><i class="fas fa-eye"></i><span>Preview Markdown</span></button>
            <button type="button" class="editor-option-item" data-action="link-notes" title="Vincular Notas"><i class="fas fa-link"></i><span>Vincular Notas</span></button>
            <button type="button" class="editor-option-item" data-action="versions" title="Vers√µes"><i class="fas fa-history"></i><span>Vers√µes</span></button>
            <button type="button" class="editor-option-item" data-action="comment" title="Coment√°rios"><i class="fas fa-comment"></i><span>Coment√°rios</span></button>
            <button type="button" class="editor-option-item" data-action="align-left" title="Alinhar √† esquerda"><i class="fas fa-align-left"></i><span>Alinhar √† esquerda</span></button>
            <button type="button" class="editor-option-item" data-action="align-center" title="Centralizar"><i class="fas fa-align-center"></i><span>Centralizar</span></button>
            <button type="button" class="editor-option-item" data-action="align-right" title="Alinhar √† direita"><i class="fas fa-align-right"></i><span>Alinhar √† direita</span></button>
            <button type="button" class="editor-option-item" data-action="list-bullet" title="Lista com marcadores"><i class="fas fa-list-ul"></i><span>Lista com marcadores</span></button>
            <button type="button" class="editor-option-item" data-action="list-number" title="Lista numerada"><i class="fas fa-list-ol"></i><span>Lista numerada</span></button>
            <button type="button" class="editor-option-item" data-action="clear-format" title="Limpar formata√ß√£o"><i class="fas fa-remove-format"></i><span>Limpar formata√ß√£o</span></button>
        </nav>
        <!-- Paleta de cores (cor do texto / marca-texto) -->
        <div class="editor-options-colors" id="editor-options-colors" style="display: none;">
            <div class="editor-options-colors-tabs">
                <button type="button" class="editor-options-color-tab active" data-mode="text">Cor do texto</button>
                <button type="button" class="editor-options-color-tab" data-mode="highlight">Marca-texto</button>
            </div>
            <div class="editor-options-colors-grid" id="editor-options-colors-grid"></div>
            <div class="editor-options-hex-row">
                <input type="text" id="editor-options-hex-input" class="editor-options-hex-input" placeholder="#000000" maxlength="7" title="C√≥digo da cor (ex: #FF5500)">
                <button type="button" id="editor-options-hex-apply" class="editor-options-hex-apply">Aplicar</button>
            </div>
        </div>
    </aside>

    <!-- Modal de Nova Pasta -->
    <div class="modal" id="modal-new-folder" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nova Pasta</h3>
                <button class="modal-close" onclick="closeModal('modal-new-folder')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Nome da Pasta</label>
                    <input type="text" id="new-folder-name" class="form-control" placeholder="Digite o nome da pasta">
                </div>
                <div class="form-group">
                    <label>Cor da Pasta</label>
                    <div class="folder-colors">
                        <div class="folder-color-option active" data-color="#007AFF" style="background: #007AFF;" onclick="typeof selectFolderColor==='function'&&selectFolderColor(this);" title="Azul"></div>
                        <div class="folder-color-option" data-color="#34C759" style="background: #34C759;" onclick="typeof selectFolderColor==='function'&&selectFolderColor(this);" title="Verde"></div>
                        <div class="folder-color-option" data-color="#FF9500" style="background: #FF9500;" onclick="typeof selectFolderColor==='function'&&selectFolderColor(this);" title="Laranja"></div>
                        <div class="folder-color-option" data-color="#FF3B30" style="background: #FF3B30;" onclick="typeof selectFolderColor==='function'&&selectFolderColor(this);" title="Vermelho"></div>
                        <div class="folder-color-option" data-color="#AF52DE" style="background: #AF52DE;" onclick="typeof selectFolderColor==='function'&&selectFolderColor(this);" title="Roxo"></div>
                        <div class="folder-color-option" data-color="#5AC8FA" style="background: #5AC8FA;" onclick="typeof selectFolderColor==='function'&&selectFolderColor(this);" title="Azul claro"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('modal-new-folder')">Cancelar</button>
                <button class="btn-primary" onclick="createFolder()">Criar Pasta</button>
            </div>
        </div>
    </div>

    <!-- Modal Renomear Pasta/Subpasta (vidro Apple: nome atual + novo nome) -->
    <div class="modal modal-glass" id="modal-rename-folder" style="display: none;">
        <div class="modal-content modal-apple modal-rename-folder">
            <div class="modal-header-apple">
                <div class="modal-icon-apple"><i class="fas fa-edit"></i></div>
                <h3>Renomear pasta</h3>
                <p class="modal-subtitle-apple">Altere o nome da pasta ou subpasta</p>
                <button type="button" class="modal-close" onclick="closeModal('modal-rename-folder')" aria-label="Fechar">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="rename-folder-id" value="">
                <div class="form-group">
                    <label for="rename-folder-current">Nome atual</label>
                    <input type="text" id="rename-folder-current" class="form-control" readonly placeholder="‚Äî">
                </div>
                <div class="form-group">
                    <label for="rename-folder-name">Novo nome</label>
                    <input type="text" id="rename-folder-name" class="form-control" placeholder="Digite o novo nome" autofocus>
                </div>
            </div>
            <div class="modal-footer modal-footer-apple">
                <button type="button" class="btn-apple-secondary" onclick="closeModal('modal-rename-folder')">Cancelar</button>
                <button type="button" class="btn-apple-primary" onclick="typeof confirmRenameFolder==='function'&&confirmRenameFolder();">
                    <i class="fas fa-check"></i> Confirmar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Nova Subpasta -->
    <div class="modal" id="modal-new-subfolder" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Criar Subpasta</h3>
                <button class="modal-close" onclick="closeModal('modal-new-subfolder')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 16px; color: var(--apple-text-secondary);">
                    Criar subpasta em: <strong id="subfolder-parent-name"></strong>
                </p>
                <div class="form-group">
                    <label>Nome da Subpasta</label>
                    <input type="text" id="new-subfolder-name" class="form-control" placeholder="Digite o nome da subpasta" autofocus>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('modal-new-subfolder')">Cancelar</button>
                <button class="btn-primary" id="create-subfolder-btn">Criar Subpasta</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirma√ß√£o -->
    <div class="modal" id="modal-confirm" style="display: none;">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3 id="confirm-title">Confirmar</h3>
            </div>
            <div class="modal-body">
                <p id="confirm-message">Tem certeza que deseja continuar?</p>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('modal-confirm')">Cancelar</button>
                <button class="btn-primary" id="confirm-ok">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal Inserir Link (vidro Apple, bonito e inteligente) -->
    <div class="modal modal-glass" id="modal-insert-link" style="display: none;">
        <div class="modal-content modal-apple modal-insert-link">
            <div class="modal-header-apple">
                <div class="modal-icon-apple"><i class="fas fa-link"></i></div>
                <h3>Inserir Link</h3>
                <p class="modal-subtitle-apple">URL e texto opcional para o link</p>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="insert-link-url">URL *</label>
                    <input type="url" id="insert-link-url" class="form-control" placeholder="https://exemplo.com">
                </div>
                <div class="form-group">
                    <label for="insert-link-text">Texto do link (opcional)</label>
                    <input type="text" id="insert-link-text" class="form-control" placeholder="Texto exibido no link">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeModal('modal-insert-link')">Cancelar</button>
                <button type="button" class="btn-primary" id="btn-insert-link-confirm"><i class="fas fa-link"></i> Inserir</button>
            </div>
        </div>
    </div>

    <!-- Modal Inserir Imagem (upload, vidro, bonito) -->
    <div class="modal modal-glass" id="modal-insert-image" style="display: none;">
        <div class="modal-content modal-apple modal-insert-image">
            <div class="modal-header-apple">
                <div class="modal-icon-apple"><i class="fas fa-image"></i></div>
                <h3>Inserir Imagem</h3>
                <p class="modal-subtitle-apple">Envie uma imagem do seu dispositivo</p>
            </div>
            <div class="modal-body">
                <div class="insert-image-zone" id="insert-image-zone">
                    <input type="file" id="insert-image-file" accept="image/*" hidden>
                    <div class="insert-image-drop" id="insert-image-drop">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Arraste uma imagem aqui ou clique para selecionar</p>
                    </div>
                </div>
                <div class="insert-image-preview" id="insert-image-preview" style="display: none;">
                    <img id="insert-image-preview-img" src="" alt="Preview">
                    <p class="insert-image-filename" id="insert-image-filename"></p>
                </div>
                <div class="insert-image-layout" id="insert-image-layout">
                    <label for="insert-image-pos">Posi√ß√£o da imagem (como no Word)</label>
                    <select id="insert-image-pos" class="insert-image-pos-select">
                        <option value="block">Bloco (padr√£o ‚Äì centralizado)</option>
                        <option value="left">Texto √† esquerda (imagem √† direita)</option>
                        <option value="right">Texto √† direita (imagem √† esquerda)</option>
                        <option value="caption">Legenda abaixo</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeModal('modal-insert-image'); resetInsertImageModal();">Cancelar</button>
                <button type="button" class="btn-primary" id="btn-insert-image-confirm" disabled><i class="fas fa-image"></i> Inserir na nota</button>
            </div>
        </div>
    </div>

    <!-- Modal de Exclus√£o de Pasta (Estilo Apple) -->
    <div class="modal" id="modal-delete-folder" style="display: none;">
        <div class="modal-content modal-apple">
            <div class="modal-header-apple">
                <div class="modal-icon-apple">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 id="delete-folder-title">Excluir Pasta</h3>
            </div>
            <div class="modal-body-apple">
                <p id="delete-folder-message" class="modal-message-apple"></p>
                <div id="delete-folder-details" class="modal-details-apple"></div>
                <p class="modal-warning-apple">Esta a√ß√£o n√£o pode ser desfeita.</p>
            </div>
            <div class="modal-footer-apple">
                <button class="btn-apple-secondary" onclick="closeModal('modal-delete-folder')">Cancelar</button>
                <button class="btn-apple-danger" id="delete-folder-confirm">Excluir</button>
            </div>
        </div>
    </div>

    <!-- Modal de Exclus√£o de Subpasta (Estilo Apple) -->
    <div class="modal" id="modal-delete-subfolder" style="display: none;">
        <div class="modal-content modal-apple">
            <div class="modal-header-apple">
                <div class="modal-icon-apple">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3>Excluir Subpasta</h3>
            </div>
            <div class="modal-body-apple">
                <p id="delete-subfolder-message" class="modal-message-apple"></p>
                <p class="modal-warning-apple">Esta a√ß√£o n√£o pode ser desfeita.</p>
            </div>
            <div class="modal-footer-apple">
                <button class="btn-apple-secondary" onclick="closeModal('modal-delete-subfolder')">Cancelar</button>
                <button class="btn-apple-danger" id="delete-subfolder-confirm">Excluir</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirma√ß√£o Apagar Definitivamente (Estilo Apple) -->
    <div class="modal" id="modal-delete-permanent" style="display: none;">
        <div class="modal-content modal-apple">
            <div class="modal-header-apple">
                <div class="modal-icon-apple danger">
                    <i class="fas fa-trash-alt"></i>
                </div>
                <h3>Apagar Definitivamente</h3>
            </div>
            <div class="modal-body-apple">
                <p class="modal-message-apple">Tem certeza que deseja apagar esta nota permanentemente?</p>
                <p class="modal-warning-apple">Esta a√ß√£o n√£o pode ser desfeita.</p>
            </div>
            <div class="modal-footer-apple">
                <button class="btn-apple-secondary" onclick="closeModal('modal-delete-permanent')">Cancelar</button>
                <button class="btn-apple-danger" id="delete-permanent-confirm">Apagar Definitivamente</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirma√ß√£o Restaurar (Estilo Apple) -->
    <div class="modal" id="modal-restore-note" style="display: none;">
        <div class="modal-content modal-apple">
            <div class="modal-header-apple">
                <div class="modal-icon-apple success">
                    <i class="fas fa-undo"></i>
                </div>
                <h3>Restaurar Nota</h3>
            </div>
            <div class="modal-body-apple">
                <p class="modal-message-apple">Tem certeza que deseja restaurar esta nota?</p>
            </div>
            <div class="modal-footer-apple">
                <button class="btn-apple-secondary" onclick="closeModal('modal-restore-note')">Cancelar</button>
                <button class="btn-apple-primary" id="restore-note-confirm">Restaurar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Tags -->
    <div class="modal" id="modal-tags" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Gerenciar Tags</h3>
                <button class="modal-close" onclick="closeModal('modal-tags')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Adicionar Tag</label>
                    <input type="text" id="new-tag-input" class="form-control" placeholder="Nome da tag">
                    <div class="tag-colors" id="tag-colors"></div>
                </div>
                <div class="tags-list" id="tags-list"></div>
            </div>
        </div>
    </div>

    <!-- Modal de Templates -->
    <div class="modal" id="modal-templates" style="display: none;">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Templates de Notas</h3>
                <button class="modal-close" onclick="closeModal('modal-templates')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="templates-grid" id="templates-grid"></div>
            </div>
        </div>
    </div>

    <!-- Modal de Estat√≠sticas -->
    <div class="modal" id="modal-statistics" style="display: none;">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Estat√≠sticas</h3>
                <button class="modal-close" onclick="closeModal('modal-statistics')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="stats-grid" id="stats-grid">
                    <div class="stat-card">
                        <h4>Total de Notas</h4>
                        <p id="stat-total-notes">0</p>
                    </div>
                    <div class="stat-card">
                        <h4>Palavras Escritas</h4>
                        <p id="stat-total-words">0</p>
                    </div>
                    <div class="stat-card">
                        <h4>Notas Criadas</h4>
                        <p id="stat-notes-created">0</p>
                    </div>
                    <div class="stat-card">
                        <h4>Tempo de Uso</h4>
                        <p id="stat-usage-time">0h</p>
                    </div>
                </div>
                <canvas id="stats-chart"></canvas>
            </div>
        </div>
    </div>

    <!-- Modal de Atalhos -->
    <div class="modal" id="modal-shortcuts" style="display: none;">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Atalhos de Teclado</h3>
                <button class="modal-close" onclick="closeModal('modal-shortcuts')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="shortcuts-list" id="shortcuts-list"></div>
            </div>
        </div>
    </div>

    <!-- Modal de Busca Avan√ßada -->
    <div class="modal" id="modal-advanced-search" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Busca Avan√ßada</h3>
                <button class="modal-close" onclick="closeModal('modal-advanced-search')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Texto</label>
                    <input type="text" id="search-text" class="form-control" placeholder="Buscar...">
                </div>
                <div class="form-group">
                    <label>Tags</label>
                    <select id="search-tags" class="form-control" multiple></select>
                </div>
                <div class="form-group">
                    <label>Data Inicial</label>
                    <input type="date" id="search-date-start" class="form-control">
                </div>
                <div class="form-group">
                    <label>Data Final</label>
                    <input type="date" id="search-date-end" class="form-control">
                </div>
                <div class="form-group">
                    <label>Tamanho M√≠nimo (palavras)</label>
                    <input type="number" id="search-size-min" class="form-control" min="0">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('modal-advanced-search')">Cancelar</button>
                <button class="btn-primary" onclick="performAdvancedSearch()">Buscar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Vers√µes -->
    <div class="modal" id="modal-versions" style="display: none;">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Hist√≥rico de Vers√µes</h3>
                <button class="modal-close" onclick="closeModal('modal-versions')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="versions-timeline" id="versions-timeline"></div>
            </div>
        </div>
    </div>

    <!-- Modal de Coment√°rios -->
    <div class="modal" id="modal-comments" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Coment√°rios</h3>
                <button class="modal-close" onclick="closeModal('modal-comments')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="comments-list" id="comments-list"></div>
                <div class="comment-input">
                    <textarea id="new-comment" class="form-control" placeholder="Adicionar coment√°rio..."></textarea>
                    <button class="btn-primary" onclick="addComment()">Adicionar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Lembretes -->
    <div class="modal" id="modal-reminders" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Lembretes</h3>
                <button class="modal-close" onclick="closeModal('modal-reminders')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Data e Hora</label>
                    <input type="datetime-local" id="reminder-datetime" class="form-control">
                </div>
                <div class="form-group">
                    <label>Mensagem</label>
                    <input type="text" id="reminder-message" class="form-control" placeholder="Mensagem do lembrete">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('modal-reminders')">Cancelar</button>
                <button class="btn-primary" onclick="addReminder()">Adicionar Lembrete</button>
            </div>
        </div>
    </div>

    <!-- Modal de Exporta√ß√£o -->
    <div class="modal" id="modal-export" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Exportar Notas</h3>
                <button class="modal-close" onclick="closeModal('modal-export')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Formato</label>
                    <select id="export-format" class="form-control">
                        <option value="html">HTML</option>
                        <option value="pdf">PDF</option>
                        <option value="md">Markdown</option>
                        <option value="txt">Texto</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Notas</label>
                    <div id="export-notes-list"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('modal-export')">Cancelar</button>
                <button class="btn-primary" onclick="exportNotes()">Exportar</button>
            </div>
        </div>
    </div>

    <!-- Painel Lateral de Propriedades -->
    <aside class="properties-panel" id="properties-panel" style="display: none;">
        <div class="properties-header">
            <h3>Propriedades</h3>
            <button onclick="togglePropertiesPanel()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="properties-content" id="properties-content"></div>
    </aside>

    <!-- Painel de Part√≠culas (Background) -->
    <canvas id="particles-canvas"></canvas>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <script src="../js/bloco_de_notas_apple.js"></script>
    <script src="../js/bloco_de_notas_apple_fixes.js"></script>
    <script src="../js/bloco_de_notas_apple_new_functions.js"></script>
    <script>
        // Menu Hamb√∫rguer
        function toggleHamburgerMenu() {
            const menu = document.getElementById('hamburger-menu');
            const btn = document.getElementById('hamburger-btn');
            if (menu && btn) {
                menu.classList.toggle('show');
                btn.classList.toggle('active');
            }
        }
        window.toggleHamburgerMenu = toggleHamburgerMenu;
        
        document.addEventListener('click', function(e) {
            const menu = document.getElementById('hamburger-menu');
            const btn = document.getElementById('hamburger-btn');
            if (menu && btn && !menu.contains(e.target) && !btn.contains(e.target)) {
                menu.classList.remove('show');
                btn.classList.remove('active');
            }
        });
        
        // Toggle do campo de busca
        function toggleSearch() {
            const searchContainer = document.getElementById('sidebar-search-container');
            const searchInput = document.getElementById('search-notes');
            if (searchContainer) {
                const isHidden = searchContainer.style.display === 'none';
                searchContainer.style.display = isHidden ? 'block' : 'none';
                if (isHidden && searchInput) {
                    setTimeout(() => searchInput.focus(), 100);
                }
            }
        }
        window.toggleSearch = toggleSearch;
    </script>
</body>
</html>
